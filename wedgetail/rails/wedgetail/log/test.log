  [4;36;1mUser Load (0.000733)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m
  [4;36;1mUser Load (0.000744)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing LoginController#load_certificate (for 0.0.0.0 at 2008-12-28 18:11:52) [POST]
  Session ID: 
  Parameters: {"certificate_upload"=>{"certificate"=>#<ActionController::TestUploadedFile:0x2b12078b56c0 @content_type="application/octet-stream", @original_filename="ian.cert", @tempfile=#<File:/tmp/ian.cert.21992.0>>}, "action"=>"load_certificate", "wedgetail"=>"12346", "controller"=>"login"}
  [4;35;1mPref Load (0.000304)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000831)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000164)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
CMD: openssl x509 -inform PEM -text
Saving new cert to /home/ian/wedgetail/certs/ihaywood@iinet.net.au
  [4;35;1mUser Load (0.000843)[0m   [0mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
  [4;36;1mUser Load (0.000180)[0m   [0;1mSELECT * FROM users WHERE (wedgetail <> '12346' and username = 'ian') [0m
  [4;35;1mUser Update (0.000302)[0m   [0mUPDATE users SET "created_at" = '2008-12-28 18:11:52', "medicare" = NULL, "known_as" = NULL, "email" = 'wedgetail@iinet.net.au', "family_name" = 'Haywood', "postcode" = NULL, "dob" = NULL, "designation" = NULL, "town" = NULL, "team" = NULL, "username" = 'ian', "role" = 1, "wedgetail" = '12346', "crn" = NULL, "hashed_password" = 'de7a078f180edeaa33c9bd4dca4a23528c10d449', "address_line" = NULL, "access" = NULL, "created_by" = NULL, "crypto_pref" = 1, "visibility" = 't', "state" = NULL, "provider" = NULL, "given_names" = 'Ian', "sex" = NULL, "hatched" = 't', "prescriber" = NULL, "patient_post" = 0, "dva" = NULL, "cert" = 'ihaywood@iinet.net.au', "salt" = 'NaCl' WHERE "id" = 1[0m
Redirected to http://test.host/login/edit/12346
Completed in 0.09501 (10 reqs/sec) | DB: 0.00337 (3%) | 302 Found [http://test.host/login/load_certificate/12346?certificate_upload%5Bcertificate%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2b12078b56c0%3E]
  [4;36;1mUser Load (0.000747)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing LoginController#load_certificate (for 0.0.0.0 at 2008-12-28 18:13:20) [POST]
  Session ID: 
  Parameters: {"certificate_upload"=>{"certificate"=>#<ActionController::TestUploadedFile:0x2adebcc44918 @content_type="application/octet-stream", @original_filename="ian.cert", @tempfile=#<File:/tmp/ian.cert.22057.0>>}, "action"=>"load_certificate", "wedgetail"=>"12346", "controller"=>"login"}
  [4;35;1mPref Load (0.000236)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000679)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000102)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
CMD: openssl x509 -inform PEM -text
Saving new cert to /home/ian/wedgetail/certs/ihaywood@iinet.net.au
  [4;35;1mUser Load (0.000878)[0m   [0mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
  [4;36;1mUser Load (0.000227)[0m   [0;1mSELECT * FROM users WHERE (wedgetail <> '12346' and username = 'ian') [0m
  [4;35;1mUser Update (0.000348)[0m   [0mUPDATE users SET "created_at" = '2008-12-28 18:13:20', "medicare" = NULL, "known_as" = NULL, "email" = 'wedgetail@iinet.net.au', "family_name" = 'Haywood', "postcode" = NULL, "dob" = NULL, "designation" = NULL, "town" = NULL, "team" = NULL, "username" = 'ian', "role" = 1, "wedgetail" = '12346', "crn" = NULL, "hashed_password" = 'de7a078f180edeaa33c9bd4dca4a23528c10d449', "address_line" = NULL, "access" = NULL, "created_by" = NULL, "crypto_pref" = 1, "visibility" = 't', "state" = NULL, "provider" = NULL, "given_names" = 'Ian', "sex" = NULL, "hatched" = 't', "prescriber" = NULL, "patient_post" = 0, "dva" = NULL, "cert" = 'ihaywood@iinet.net.au', "salt" = 'NaCl' WHERE "id" = 1[0m
Redirected to http://test.host/login/edit/12346
Completed in 0.02668 (37 reqs/sec) | DB: 0.00322 (12%) | 302 Found [http://test.host/login/load_certificate/12346?certificate_upload%5Bcertificate%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2adebcc44918%3E]
  [4;36;1mUser Load (0.000747)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing LoginController#load_certificate (for 0.0.0.0 at 2008-12-28 18:13:43) [POST]
  Session ID: 
  Parameters: {"certificate_upload"=>{"certificate"=>#<ActionController::TestUploadedFile:0x2b03e8b6b7e8 @content_type="application/octet-stream", @original_filename="ian.cert", @tempfile=#<File:/tmp/ian.cert.22079.0>>}, "action"=>"load_certificate", "wedgetail"=>"12346", "controller"=>"login"}
  [4;35;1mPref Load (0.000255)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000706)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000126)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
CMD: openssl x509 -inform PEM -text
Saving new cert to /home/ian/wedgetail/certs/ihaywood@iinet.net.au
  [4;35;1mUser Load (0.000908)[0m   [0mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
  [4;36;1mUser Load (0.000199)[0m   [0;1mSELECT * FROM users WHERE (wedgetail <> '12346' and username = 'ian') [0m
  [4;35;1mUser Update (0.000352)[0m   [0mUPDATE users SET "created_at" = '2008-12-28 18:13:43', "medicare" = NULL, "known_as" = NULL, "email" = 'wedgetail@iinet.net.au', "family_name" = 'Haywood', "postcode" = NULL, "dob" = NULL, "designation" = NULL, "town" = NULL, "team" = NULL, "username" = 'ian', "role" = 1, "wedgetail" = '12346', "crn" = NULL, "hashed_password" = 'de7a078f180edeaa33c9bd4dca4a23528c10d449', "address_line" = NULL, "access" = NULL, "created_by" = NULL, "crypto_pref" = 1, "visibility" = 't', "state" = NULL, "provider" = NULL, "given_names" = 'Ian', "sex" = NULL, "hatched" = 't', "prescriber" = NULL, "patient_post" = 0, "dva" = NULL, "cert" = 'ihaywood@iinet.net.au', "salt" = 'NaCl' WHERE "id" = 1[0m
Redirected to http://test.host/login/edit/12346
Completed in 0.02069 (48 reqs/sec) | DB: 0.00329 (15%) | 302 Found [http://test.host/login/load_certificate/12346?certificate_upload%5Bcertificate%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2b03e8b6b7e8%3E]
  [4;36;1mUser Load (0.000747)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing LoginController#load_certificate (for 0.0.0.0 at 2008-12-28 18:14:19) [POST]
  Session ID: 
  Parameters: {"certificate_upload"=>{"certificate"=>#<ActionController::TestUploadedFile:0x2b344db3f7e8 @content_type="application/octet-stream", @original_filename="ian.cert", @tempfile=#<File:/tmp/ian.cert.22109.0>>}, "action"=>"load_certificate", "wedgetail"=>"12346", "controller"=>"login"}
  [4;35;1mPref Load (0.000230)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000725)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000104)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
CMD: openssl x509 -inform PEM -text
Saving new cert to /home/ian/wedgetail/certs/ihaywood@iinet.net.au
  [4;35;1mUser Load (0.000909)[0m   [0mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
  [4;36;1mUser Load (0.000230)[0m   [0;1mSELECT * FROM users WHERE (wedgetail <> '12346' and username = 'ian') [0m
  [4;35;1mUser Update (0.000354)[0m   [0mUPDATE users SET "created_at" = '2008-12-28 18:14:19', "medicare" = NULL, "known_as" = NULL, "email" = 'wedgetail@iinet.net.au', "family_name" = 'Haywood', "postcode" = NULL, "dob" = NULL, "designation" = NULL, "town" = NULL, "team" = NULL, "username" = 'ian', "role" = 1, "wedgetail" = '12346', "crn" = NULL, "hashed_password" = 'de7a078f180edeaa33c9bd4dca4a23528c10d449', "address_line" = NULL, "access" = NULL, "created_by" = NULL, "crypto_pref" = 1, "visibility" = 't', "state" = NULL, "provider" = NULL, "given_names" = 'Ian', "sex" = NULL, "hatched" = 't', "prescriber" = NULL, "patient_post" = 0, "dva" = NULL, "cert" = 'ihaywood@iinet.net.au', "salt" = 'NaCl' WHERE "id" = 1[0m
Redirected to http://test.host/login/edit/12346
Completed in 0.02142 (46 reqs/sec) | DB: 0.00330 (15%) | 302 Found [http://test.host/login/load_certificate/12346?certificate_upload%5Bcertificate%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2b344db3f7e8%3E]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:20:34) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;36;1mPref Load (0.000174)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000259)[0m   [0mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;36;1mSQL (0.000217)[0m   [0;1mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2adb2b31ee90 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.01982 (50 reqs/sec) | DB: 0.00065 (3%) | 302 Found [http://test.host/record/next]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:22:22) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;36;1mPref Load (0.000202)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000191)[0m   [0mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;36;1mSQL (0.000201)[0m   [0;1mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2b925893a128 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00587 (170 reqs/sec) | DB: 0.00059 (10%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000800)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#index (for 0.0.0.0 at 2008-12-28 18:22:36) [GET]
  Session ID: 
  Parameters: {"action"=>"index", "controller"=>"record"}
  [4;35;1mPref Load (0.000172)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000691)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000128)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
Rendering template within layouts/record
Rendering record/list
  [4;35;1mSQL (0.001138)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000416)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000255)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.01009)
Completed in 0.03878 (25 reqs/sec) | Rendering: 0.02487 (64%) | DB: 0.00360 (9%) | 200 OK [http://test.host/record]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:22:36) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;36;1mPref Load (0.000156)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000157)[0m   [0mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;36;1mSQL (0.000192)[0m   [0;1mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2ac3981f9128 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00182 (548 reqs/sec) | DB: 0.00050 (27%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000867)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 18:23:16) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;35;1mPref Load (0.000178)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000674)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000101)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mUser Load (0.000385)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;36;1mSQL (0.004621)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mMessage Load (0.000253)[0m   [0mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000168)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.01265)
Completed in 0.04492 (22 reqs/sec) | Rendering: 0.02721 (60%) | DB: 0.00725 (16%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:23:16) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;35;1mPref Load (0.000156)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000148)[0m   [0;1mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;35;1mSQL (0.000191)[0m   [0mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2b98ea4ee5e0 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00178 (561 reqs/sec) | DB: 0.00050 (27%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000761)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 18:30:30) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;35;1mPref Load (0.000174)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000666)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000102)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mUser Load (0.000418)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;36;1mSQL (0.001153)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mMessage Load (0.000278)[0m   [0mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000173)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.01282)
Completed in 0.03200 (31 reqs/sec) | Rendering: 0.01674 (52%) | DB: 0.00373 (11%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:30:30) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;35;1mPref Load (0.000214)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000169)[0m   [0;1mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;35;1mSQL (0.000217)[0m   [0mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2ad88f4eb028 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00285 (350 reqs/sec) | DB: 0.00060 (21%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000765)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 18:31:57) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;35;1mPref Load (0.000212)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000736)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000105)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mUser Load (0.000944)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:31:57) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;36;1mPref Load (0.000180)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000173)[0m   [0mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;36;1mSQL (0.000227)[0m   [0;1mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2b8eda4cc018 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00206 (486 reqs/sec) | DB: 0.00058 (28%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000744)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 18:33:20) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;35;1mPref Load (0.000183)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000673)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000103)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mUser Load (0.001505)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:33:20) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;36;1mPref Load (0.000254)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000196)[0m   [0mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;36;1mSQL (0.000305)[0m   [0;1mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2af55d826018 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00268 (372 reqs/sec) | DB: 0.00076 (28%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000743)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 18:34:42) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;35;1mPref Load (0.000179)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000679)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000104)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mUser Load (0.000929)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;36;1mUser Load (0.000345)[0m   [0;1mSELECT distinct wedgetail,dob,family_name,given_names FROM users WHERE (wedgetail != '1234' and ((dob= '1991-07-06' and given_names like 'John%') or (dob= '1991-07-06' and family_name like 'Bloggs') or (family_name like 'Bloggs' and given_names like 'John%') or (family_name like 'John%' and given_names like 'Bloggs'))) [0m
  [4;35;1mSQL (0.001095)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000263)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000677)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00953)
Completed in 0.03107 (32 reqs/sec) | Rendering: 0.01428 (45%) | DB: 0.00501 (16%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:34:42) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;35;1mPref Load (0.000245)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000185)[0m   [0;1mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;35;1mSQL (0.000279)[0m   [0mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2b87bf5ac018 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00247 (405 reqs/sec) | DB: 0.00071 (28%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000732)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 18:36:00) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;35;1mPref Load (0.000183)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000672)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000101)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mUser Load (0.000935)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;36;1mUser Load (0.000338)[0m   [0;1mSELECT distinct wedgetail,dob,family_name,given_names FROM users WHERE (wedgetail != '1234' and ((dob= '1991-07-06' and given_names like 'John%') or (dob= '1991-07-06' and family_name like 'Bloggs') or (family_name like 'Bloggs' and given_names like 'John%') or (family_name like 'John%' and given_names like 'Bloggs'))) [0m
  [4;35;1mSQL (0.001098)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000264)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000698)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00978)
Completed in 0.03023 (33 reqs/sec) | Rendering: 0.01447 (47%) | DB: 0.00502 (16%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:36:00) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;35;1mPref Load (0.000172)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000146)[0m   [0;1mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;35;1mSQL (0.000197)[0m   [0mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2b78e8bc6510 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00186 (537 reqs/sec) | DB: 0.00051 (27%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000755)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 18:40:43) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;35;1mPref Load (0.000176)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000673)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000109)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mUser Load (0.000947)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;36;1mUser Load (0.000361)[0m   [0;1mSELECT distinct wedgetail,dob,family_name,given_names FROM users WHERE (wedgetail != '1234' and ((dob= '1991-07-06' and given_names like 'John%') or (dob= '1991-07-06' and family_name like 'Bloggs') or (family_name like 'Bloggs' and given_names like 'John%') or (family_name like 'John%' and given_names like 'Bloggs'))) [0m
  [4;35;1mSQL (0.001100)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000287)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000685)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00993)
Completed in 0.03058 (32 reqs/sec) | Rendering: 0.01458 (47%) | DB: 0.00509 (16%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:40:43) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;35;1mPref Load (0.000201)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000152)[0m   [0;1mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;35;1mSQL (0.000222)[0m   [0mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2b6e64c2a800 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00205 (488 reqs/sec) | DB: 0.00057 (28%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000746)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 18:44:26) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;35;1mPref Load (0.000179)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000673)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000106)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mUser Load (0.000932)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;36;1mUser Load (0.000338)[0m   [0;1mSELECT distinct wedgetail,dob,family_name,given_names FROM users WHERE (wedgetail != '1234' and ((dob= '1991-07-06' and given_names like 'John%') or (dob= '1991-07-06' and family_name like 'Bloggs') or (family_name like 'Bloggs' and given_names like 'John%') or (family_name like 'John%' and given_names like 'Bloggs'))) [0m
  [4;35;1mSQL (0.001103)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000280)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000688)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00978)
Completed in 0.03182 (31 reqs/sec) | Rendering: 0.01509 (47%) | DB: 0.00505 (15%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:44:26) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;35;1mPref Load (0.000160)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000153)[0m   [0;1mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;35;1mSQL (0.000196)[0m   [0mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2b724fbda028 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00182 (550 reqs/sec) | DB: 0.00051 (28%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000741)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 18:49:11) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;35;1mPref Load (0.000184)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000674)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000108)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mUser Load (0.000963)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;36;1mUser Load (0.000345)[0m   [0;1mSELECT distinct wedgetail,dob,family_name,given_names FROM users WHERE (wedgetail != '1234' and ((dob= '1991-07-06' and given_names like 'John%') or (dob= '1991-07-06' and family_name like 'Bloggs') or (family_name like 'Bloggs' and given_names like 'John%') or (family_name like 'John%' and given_names like 'Bloggs'))) [0m
  [4;35;1mSQL (0.001165)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000266)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000677)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00972)
Completed in 0.03121 (32 reqs/sec) | Rendering: 0.01427 (45%) | DB: 0.00512 (16%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:49:11) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;35;1mPref Load (0.000158)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000146)[0m   [0;1mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;35;1mSQL (0.000201)[0m   [0mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2afd18cb6188 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00183 (545 reqs/sec) | DB: 0.00051 (27%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000789)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 18:55:11) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;35;1mPref Load (0.000183)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000681)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000130)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mUser Load (0.000943)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;36;1mUser Load (0.000354)[0m   [0;1mSELECT distinct wedgetail,dob,family_name,given_names FROM users WHERE (wedgetail != '1234' and ((dob= '1991-07-06' and given_names like 'John%') or (dob= '1991-07-06' and family_name like 'Bloggs') or (family_name like 'Bloggs' and given_names like 'John%') or (family_name like 'John%' and given_names like 'Bloggs'))) [0m
  [4;35;1mSQL (0.001122)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000266)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000675)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00972)
Completed in 0.03127 (31 reqs/sec) | Rendering: 0.01450 (46%) | DB: 0.00514 (16%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 18:55:11) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;35;1mPref Load (0.000185)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000154)[0m   [0;1mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;35;1mSQL (0.000218)[0m   [0mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2b58494c4510 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00198 (505 reqs/sec) | DB: 0.00056 (28%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000735)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 2) [0m
  [4;35;1mUser Load (0.000727)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#hatch (for 0.0.0.0 at 2008-12-28 19:22:52) [POST]
  Session ID: 
  Parameters: {"action"=>"hatch", "wedgetail"=>"1234", "controller"=>"record"}
  [4;36;1mPref Load (0.000178)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000633)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000101)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mUser Load (0.000895)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1234') ORDER BY created_at DESC LIMIT 1[0m
  [4;35;1mUser Load (0.000180)[0m   [0mSELECT * FROM users WHERE (wedgetail <> '1234' and username = '1234') [0m
  [4;36;1mUser Load (0.000740)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Completed in 0.01496 (66 reqs/sec) | Rendering: 0.00334 (22%) | DB: 0.00419 (28%) | 200 OK [http://test.host/record/hatch/1234]
  [4;35;1mUser Load (0.000680)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 19:22:52) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;36;1mPref Load (0.000149)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000631)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000096)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mUser Load (0.001626)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;35;1mUser Load (0.000351)[0m   [0mSELECT distinct wedgetail,dob,family_name,given_names FROM users WHERE (wedgetail != '1234' and ((dob= '1991-07-06' and given_names like 'John%') or (dob= '1991-07-06' and family_name like 'Bloggs') or (family_name like 'Bloggs' and given_names like 'John%') or (family_name like 'John%' and given_names like 'Bloggs'))) [0m
  [4;36;1mSQL (0.001106)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mMessage Load (0.000245)[0m   [0mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000623)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.05544)
Completed in 0.06771 (14 reqs/sec) | Rendering: 0.06103 (90%) | DB: 0.00551 (8%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 19:22:52) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;36;1mPref Load (0.000156)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000154)[0m   [0mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;36;1mSQL (0.000202)[0m   [0;1mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2b20a13358c8 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00183 (546 reqs/sec) | DB: 0.00051 (27%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000729)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 2) [0m
  [4;35;1mUser Load (0.000680)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#hatch (for 0.0.0.0 at 2008-12-28 19:23:31) [POST]
  Session ID: 
  Parameters: {"action"=>"hatch", "wedgetail"=>"1234", "controller"=>"record"}
  [4;36;1mPref Load (0.000179)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000663)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000106)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mUser Load (0.000877)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1234') ORDER BY created_at DESC LIMIT 1[0m
  [4;35;1mUser Load (0.000173)[0m   [0mSELECT * FROM users WHERE (wedgetail <> '1234' and username = '1234') [0m
  [4;36;1mUser Load (0.000750)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Completed in 0.01591 (62 reqs/sec) | Rendering: 0.00421 (26%) | DB: 0.00416 (26%) | 200 OK [http://test.host/record/hatch/1234]
  [4;35;1mUser Load (0.000675)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 19:23:31) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;36;1mPref Load (0.000147)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000647)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000102)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mUser Load (0.000741)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;35;1mUser Load (0.000350)[0m   [0mSELECT distinct wedgetail,dob,family_name,given_names FROM users WHERE (wedgetail != '1234' and ((dob= '1991-07-06' and given_names like 'John%') or (dob= '1991-07-06' and family_name like 'Bloggs') or (family_name like 'Bloggs' and given_names like 'John%') or (family_name like 'John%' and given_names like 'Bloggs'))) [0m
  [4;36;1mSQL (0.001099)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mMessage Load (0.000295)[0m   [0mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000663)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.01016)
Completed in 0.02079 (48 reqs/sec) | Rendering: 0.01494 (71%) | DB: 0.00472 (22%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 19:23:31) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;36;1mPref Load (0.000176)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000159)[0m   [0mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;36;1mSQL (0.000204)[0m   [0;1mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2aafa28ed678 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00189 (528 reqs/sec) | DB: 0.00054 (28%) | 302 Found [http://test.host/record/next]
  [4;36;1mUser Load (0.000735)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 2) [0m
  [4;35;1mUser Load (0.000689)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#hatch (for 0.0.0.0 at 2008-12-28 19:24:33) [POST]
  Session ID: 
  Parameters: {"action"=>"hatch", "wedgetail"=>"1234", "controller"=>"record"}
  [4;36;1mPref Load (0.000181)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000644)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000101)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mUser Load (0.001246)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1234') ORDER BY created_at DESC LIMIT 1[0m
  [4;35;1mUser Load (0.000179)[0m   [0mSELECT * FROM users WHERE (wedgetail <> '1234' and username = '1234') [0m
  [4;36;1mUser Load (0.000739)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Completed in 0.01547 (64 reqs/sec) | Rendering: 0.00340 (21%) | DB: 0.00451 (29%) | 200 OK [http://test.host/record/hatch/1234]
  [4;35;1mUser Load (0.000678)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing RecordController#nest (for 0.0.0.0 at 2008-12-28 19:24:33) [GET]
  Session ID: 
  Parameters: {"action"=>"nest", "controller"=>"record"}
  [4;36;1mPref Load (0.000148)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000640)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000098)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mUser Load (0.000746)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) ORDER BY family_name,given_names[0m
Rendering template within layouts/record
Rendering record/nest
  [4;35;1mUser Load (0.000348)[0m   [0mSELECT distinct wedgetail,dob,family_name,given_names FROM users WHERE (wedgetail != '1234' and ((dob= '1991-07-06' and given_names like 'John%') or (dob= '1991-07-06' and family_name like 'Bloggs') or (family_name like 'Bloggs' and given_names like 'John%') or (family_name like 'John%' and given_names like 'Bloggs'))) [0m
  [4;36;1mSQL (0.001114)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mMessage Load (0.000389)[0m   [0mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000837)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.01276)
Completed in 0.02316 (43 reqs/sec) | Rendering: 0.01707 (73%) | DB: 0.00500 (21%) | 200 OK [http://test.host/record/nest]


Processing RecordController#next (for 0.0.0.0 at 2008-12-28 19:24:33) [GET]
  Session ID: 
  Parameters: {"action"=>"next", "controller"=>"record"}
  [4;36;1mPref Load (0.000160)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000149)[0m   [0mSELECT * FROM users WHERE (users."id" IS NULL) LIMIT 1[0m
  [4;36;1mSQL (0.000199)[0m   [0;1mSELECT count(*) AS count_all FROM users [0m
Redirected to http://test.host/login/login
Filter chain halted as [#<ActionController::Filters::ClassMethods::SymbolFilter:0x2ae6201c3820 @filter=:authenticate>] rendered_or_redirected.
Completed in 0.00184 (544 reqs/sec) | DB: 0.00051 (27%) | 302 Found [http://test.host/record/next]
  [4;36;1mNarrative Load (0.000504)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000661)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m
  [4;36;1mSQL (0.000315)[0m   [0;1mSELECT count(*) AS count_all FROM narratives [0m


Processing EntryController#create (for 0.0.0.0 at 2008-12-28 19:32:20) [POST]
  Session ID: 
  Parameters: {"narrative"=>{"narrative_type_id"=>1, "title"=>"Test Narrative", "wedgetail"=>"1234", "uploaded_narrative"=>#<ActionController::TestUploadedFile:0x2b482fb60da8 @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.25718.0>, @original_filename="letter.txt">}, "action"=>"create", "controller"=>"entry"}
  [4;35;1mPref Load (0.000186)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000667)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000155)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mNarrative Load (0.000652)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.001018)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#new (for 0.0.0.0 at 2008-12-28 19:32:20) [GET]
  Session ID: 
  Parameters: {"action"=>"new", "controller"=>"entry"}
  [4;35;1mPref Load (0.000181)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000659)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000110)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mNarrativeType Load (0.000275)[0m   [0mSELECT * FROM narrative_types ORDER BY narrative_type_name[0m
Rendering template within layouts/record
Rendering entry/new
Rendered entry/_form (0.00205)
  [4;36;1mSQL (0.001093)[0m   [0;1m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;35;1mMessage Load (0.000239)[0m   [0mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.001007)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.01024)
Completed in 0.02872 (34 reqs/sec) | Rendering: 0.01491 (51%) | DB: 0.00772 (26%) | 200 OK [http://test.host/entry/new]
  [4;36;1mNarrative Load (0.000428)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.037092)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:32:20) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"text"=>"Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"}, "controller"=>"entry"}
  [4;36;1mPref Load (0.000656)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000701)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000101)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mNarrative Load (0.000447)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000637)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:32:20) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2b483060ce78 @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.25718.1>, @original_filename="letter.txt">}, "controller"=>"entry"}
  [4;36;1mPref Load (0.000141)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000843)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000143)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mNarrative Load (0.000474)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000651)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m
  [4;36;1mSQL (0.000192)[0m   [0;1mSELECT count(*) AS count_all FROM narratives [0m


Processing EntryController#create (for 0.0.0.0 at 2008-12-28 19:33:09) [POST]
  Session ID: 
  Parameters: {"narrative"=>{"narrative_type_id"=>1, "title"=>"Test Narrative", "wedgetail"=>"1234", "uploaded_narrative"=>#<ActionController::TestUploadedFile:0x2b9233bc1240 @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.25756.0>, @original_filename="letter.txt">}, "action"=>"create", "controller"=>"entry"}
  [4;35;1mPref Load (0.000177)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000668)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000102)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mNarrative Create (0.000295)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, 1, 'Test Narrative', '12346', 'f', '1234', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', NULL, '2008-12-28 19:33:09', NULL)[0m
DEBUG: getting user for "1234"
  [4;36;1mUser Load (0.000670)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1234') LIMIT 1[0m
  [4;35;1mInterest Load (0.000184)[0m   [0mSELECT * FROM interests WHERE (patient='1234') [0m
  [4;36;1mUser Load (0.000745)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
Redirected to http://test.host/record/show/1234
Completed in 0.01918 (52 reqs/sec) | DB: 0.00416 (21%) | 302 Found [http://test.host/entry/create?narrative%5Bnarrative_type_id%5D=1&narrative%5Btitle%5D=Test+Narrative&narrative%5Buploaded_narrative%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2b9233bc1240%3E&narrative%5Bwedgetail%5D=1234]
  [4;35;1mSQL (0.000213)[0m   [0mSELECT count(*) AS count_all FROM narratives [0m
  [4;36;1mNarrative Load (0.000400)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000624)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#new (for 0.0.0.0 at 2008-12-28 19:33:09) [GET]
  Session ID: 
  Parameters: {"action"=>"new", "controller"=>"entry"}
  [4;36;1mPref Load (0.000139)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000639)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000103)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mNarrativeType Load (0.000272)[0m   [0;1mSELECT * FROM narrative_types ORDER BY narrative_type_name[0m
Rendering template within layouts/record
Rendering entry/new
Rendered entry/_form (0.00219)
  [4;35;1mSQL (0.001192)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000259)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.001783)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.05519)
Completed in 0.06829 (14 reqs/sec) | Rendering: 0.05972 (87%) | DB: 0.00562 (8%) | 200 OK [http://test.host/entry/new]
  [4;35;1mNarrative Load (0.000504)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000749)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:33:09) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"text"=>"Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000160)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000683)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000104)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mNarrative Load (0.000436)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000636)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:33:09) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2b9234626e88 @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.25756.1>, @original_filename="letter.txt">}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000141)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000652)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000099)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mNarrative Load (0.000475)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000662)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m
  [4;36;1mSQL (0.000194)[0m   [0;1mSELECT count(*) AS count_all FROM narratives [0m


Processing EntryController#create (for 0.0.0.0 at 2008-12-28 19:33:59) [POST]
  Session ID: 
  Parameters: {"narrative"=>{"narrative_type_id"=>1, "title"=>"Test Narrative", "wedgetail"=>"1234", "uploaded_narrative"=>#<ActionController::TestUploadedFile:0x2b1b912e1378 @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.25799.0>, @original_filename="letter.txt">}, "action"=>"create", "controller"=>"entry"}
  [4;35;1mPref Load (0.000179)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000658)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000102)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mNarrative Create (0.000268)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, 1, 'Test Narrative', '12346', 'f', '1234', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', NULL, '2008-12-28 19:33:59', NULL)[0m
DEBUG: getting user for "1234"
  [4;36;1mUser Load (0.000675)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1234') LIMIT 1[0m
  [4;35;1mInterest Load (0.000199)[0m   [0mSELECT * FROM interests WHERE (patient='1234') [0m
  [4;36;1mUser Load (0.000640)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
Redirected to http://test.host/record/show/1234
Completed in 0.01915 (52 reqs/sec) | DB: 0.00405 (21%) | 302 Found [http://test.host/entry/create?narrative%5Bnarrative_type_id%5D=1&narrative%5Btitle%5D=Test+Narrative&narrative%5Buploaded_narrative%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2b1b912e1378%3E&narrative%5Bwedgetail%5D=1234]
  [4;35;1mSQL (0.000225)[0m   [0mSELECT count(*) AS count_all FROM narratives [0m
  [4;36;1mNarrative Load (0.000407)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000649)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#new (for 0.0.0.0 at 2008-12-28 19:33:59) [GET]
  Session ID: 
  Parameters: {"action"=>"new", "controller"=>"entry"}
  [4;36;1mPref Load (0.000202)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000743)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000231)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mNarrativeType Load (0.000301)[0m   [0;1mSELECT * FROM narrative_types ORDER BY narrative_type_name[0m
Rendering template within layouts/record
Rendering entry/new
Rendered entry/_form (0.00215)
  [4;35;1mSQL (0.001076)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000241)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.006098)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.05063)
Completed in 0.06465 (15 reqs/sec) | Rendering: 0.05023 (77%) | DB: 0.01017 (15%) | 200 OK [http://test.host/entry/new]
  [4;35;1mNarrative Load (0.000448)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000662)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:34:00) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"text"=>"Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000134)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000665)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000102)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000878)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000729)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
  [4;35;1mNarrative Load (0.000411)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000623)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:34:00) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2b1b91d147f0 @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.25799.1>, @original_filename="letter.txt">}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000175)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000669)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000099)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
file = "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000780)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000720)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
  [4;36;1mNarrative Load (0.000463)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000648)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m
  [4;36;1mSQL (0.000192)[0m   [0;1mSELECT count(*) AS count_all FROM narratives [0m


Processing EntryController#create (for 0.0.0.0 at 2008-12-28 19:35:04) [POST]
  Session ID: 
  Parameters: {"narrative"=>{"narrative_type_id"=>1, "title"=>"Test Narrative", "wedgetail"=>"1234", "uploaded_narrative"=>#<ActionController::TestUploadedFile:0x2ab93f572240 @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.25855.0>, @original_filename="letter.txt">}, "action"=>"create", "controller"=>"entry"}
  [4;35;1mPref Load (0.000185)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000664)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000105)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mNarrative Create (0.000296)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, 1, 'Test Narrative', '12346', 'f', '1234', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', NULL, '2008-12-28 19:35:04', NULL)[0m
DEBUG: getting user for "1234"
  [4;36;1mUser Load (0.000662)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1234') LIMIT 1[0m
  [4;35;1mInterest Load (0.000187)[0m   [0mSELECT * FROM interests WHERE (patient='1234') [0m
  [4;36;1mUser Load (0.000624)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
Redirected to http://test.host/record/show/1234
Completed in 0.01979 (50 reqs/sec) | DB: 0.00403 (20%) | 302 Found [http://test.host/entry/create?narrative%5Bnarrative_type_id%5D=1&narrative%5Btitle%5D=Test+Narrative&narrative%5Buploaded_narrative%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2ab93f572240%3E&narrative%5Bwedgetail%5D=1234]
  [4;35;1mSQL (0.000213)[0m   [0mSELECT count(*) AS count_all FROM narratives [0m
  [4;36;1mNarrative Load (0.000402)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000630)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#new (for 0.0.0.0 at 2008-12-28 19:35:04) [GET]
  Session ID: 
  Parameters: {"action"=>"new", "controller"=>"entry"}
  [4;36;1mPref Load (0.000142)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000637)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000128)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mNarrativeType Load (0.000276)[0m   [0;1mSELECT * FROM narrative_types ORDER BY narrative_type_name[0m
Rendering template within layouts/record
Rendering entry/new
Rendered entry/_form (0.00239)
  [4;35;1mSQL (0.001094)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000239)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.001249)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.05111)
Completed in 0.06555 (15 reqs/sec) | Rendering: 0.05743 (87%) | DB: 0.00501 (7%) | 200 OK [http://test.host/entry/new]
  [4;35;1mNarrative Load (0.000441)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000661)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:35:04) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"text"=>"Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000128)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000667)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000102)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000892)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000751)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1235", narrative_type_id: nil, title: nil, content: "Dear Wedgetail\n\nThis is a test message to check web...", narrative_date: "2008-12-28", created_by: 1, created_at: nil, content_type: "text/plain", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000214)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, NULL, NULL, 1, 'f', '1235', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', '2008-12-28', '2008-12-28 19:35:04', NULL)[0m
DEBUG: getting user for "1235"
  [4;36;1mUser Load (0.000655)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') LIMIT 1[0m
  [4;35;1mInterest Load (0.000091)[0m   [0mSELECT * FROM interests WHERE (patient='1235') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000291)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000738)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00347)
Completed in 0.02138 (46 reqs/sec) | Rendering: 0.00654 (30%) | DB: 0.00563 (26%) | 200 OK [http://test.host/entry/upload?upload%5Btext%5D=Dear+Wedgetail%0A%0AThis+is+a+test+message+to+check+web+upload+and+forwarding%0Aof+messages.%0A%0ARe%3A+Bloggs%2C+Jack%2C+DOB+2%2F1%2F1960%0A%0AYours+sincerely%2C%0A%0AUnit+Test+Script%0A]
  [4;35;1mNarrative Load (0.000437)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000636)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:35:04) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2ab93fd7c1c0 @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.25855.1>, @original_filename="letter.txt">}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000143)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000638)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000124)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
file = "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000770)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000725)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1235", narrative_type_id: nil, title: nil, content: "Dear Wedgetail\n\nThis is a test message to check web...", narrative_date: "2008-12-28", created_by: 1, created_at: nil, content_type: "text/plain", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000247)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, NULL, NULL, 1, 'f', '1235', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', '2008-12-28', '2008-12-28 19:35:04', NULL)[0m
DEBUG: getting user for "1235"
  [4;36;1mUser Load (0.000642)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') LIMIT 1[0m
  [4;35;1mInterest Load (0.000093)[0m   [0mSELECT * FROM interests WHERE (patient='1235') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000233)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000652)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00288)
Completed in 0.01479 (67 reqs/sec) | Rendering: 0.00391 (26%) | DB: 0.00534 (36%) | 200 OK [http://test.host/entry/upload?upload%5Bfile%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2ab93fd7c1c0%3E]
  [4;36;1mNarrative Load (0.000529)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000660)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m
  [4;36;1mSQL (0.000190)[0m   [0;1mSELECT count(*) AS count_all FROM narratives [0m


Processing EntryController#create (for 0.0.0.0 at 2008-12-28 19:35:45) [POST]
  Session ID: 
  Parameters: {"narrative"=>{"narrative_type_id"=>1, "title"=>"Test Narrative", "wedgetail"=>"1234", "uploaded_narrative"=>#<ActionController::TestUploadedFile:0x2ad32d7e8a80 @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.25886.0>, @original_filename="letter.txt">}, "action"=>"create", "controller"=>"entry"}
  [4;35;1mPref Load (0.000180)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000657)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000145)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mNarrative Create (0.000299)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, 1, 'Test Narrative', '12346', 'f', '1234', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', NULL, '2008-12-28 19:35:45', NULL)[0m
DEBUG: getting user for "1234"
  [4;36;1mUser Load (0.000665)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1234') LIMIT 1[0m
  [4;35;1mInterest Load (0.000191)[0m   [0mSELECT * FROM interests WHERE (patient='1234') [0m
  [4;36;1mUser Load (0.000610)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
Redirected to http://test.host/record/show/1234
Completed in 0.02001 (49 reqs/sec) | DB: 0.00413 (20%) | 302 Found [http://test.host/entry/create?narrative%5Bnarrative_type_id%5D=1&narrative%5Btitle%5D=Test+Narrative&narrative%5Buploaded_narrative%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2ad32d7e8a80%3E&narrative%5Bwedgetail%5D=1234]
  [4;35;1mSQL (0.000213)[0m   [0mSELECT count(*) AS count_all FROM narratives [0m
  [4;36;1mNarrative Load (0.000429)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000679)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#new (for 0.0.0.0 at 2008-12-28 19:35:45) [GET]
  Session ID: 
  Parameters: {"action"=>"new", "controller"=>"entry"}
  [4;36;1mPref Load (0.000145)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000652)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000106)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mNarrativeType Load (0.000284)[0m   [0;1mSELECT * FROM narrative_types ORDER BY narrative_type_name[0m
Rendering template within layouts/record
Rendering entry/new
Rendered entry/_form (0.00258)
  [4;35;1mSQL (0.001120)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000242)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.006037)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.05050)
Completed in 0.06481 (15 reqs/sec) | Rendering: 0.05194 (80%) | DB: 0.00991 (15%) | 200 OK [http://test.host/entry/new]
  [4;35;1mNarrative Load (0.000444)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000654)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:35:45) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"text"=>"Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000129)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000712)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000100)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000855)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000723)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1235", narrative_type_id: nil, title: nil, content: "Dear Wedgetail\n\nThis is a test message to check web...", narrative_date: "2008-12-28", created_by: 1, created_at: nil, content_type: "text/plain", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000234)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, NULL, NULL, 1, 'f', '1235', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', '2008-12-28', '2008-12-28 19:35:45', NULL)[0m
DEBUG: getting user for "1235"
  [4;36;1mUser Load (0.000666)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') LIMIT 1[0m
  [4;35;1mInterest Load (0.000126)[0m   [0mSELECT * FROM interests WHERE (patient='1235') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000253)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000674)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00303)
Completed in 0.02059 (48 reqs/sec) | Rendering: 0.00619 (30%) | DB: 0.00557 (27%) | 200 OK [http://test.host/entry/upload?upload%5Btext%5D=Dear+Wedgetail%0A%0AThis+is+a+test+message+to+check+web+upload+and+forwarding%0Aof+messages.%0A%0ARe%3A+Bloggs%2C+Jack%2C+DOB+2%2F1%2F1960%0A%0AYours+sincerely%2C%0A%0AUnit+Test+Script%0A]
  [4;35;1mNarrative Load (0.000418)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000638)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:35:45) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2ad32e12d780 @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.25886.1>, @original_filename="letter.txt">}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000167)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000661)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000098)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
file = "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000780)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000753)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1235", narrative_type_id: nil, title: nil, content: "Dear Wedgetail\n\nThis is a test message to check web...", narrative_date: "2008-12-28", created_by: 1, created_at: nil, content_type: "text/plain", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000210)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, NULL, NULL, 1, 'f', '1235', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', '2008-12-28', '2008-12-28 19:35:45', NULL)[0m
DEBUG: getting user for "1235"
  [4;36;1mUser Load (0.000635)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') LIMIT 1[0m
  [4;35;1mInterest Load (0.000091)[0m   [0mSELECT * FROM interests WHERE (patient='1235') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000225)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000649)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00287)
Completed in 0.01415 (70 reqs/sec) | Rendering: 0.00390 (27%) | DB: 0.00533 (37%) | 200 OK [http://test.host/entry/upload?upload%5Bfile%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2ad32e12d780%3E]
  [4;36;1mNarrative Load (0.000475)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000666)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m
  [4;36;1mSQL (0.000194)[0m   [0;1mSELECT count(*) AS count_all FROM narratives [0m


Processing EntryController#create (for 0.0.0.0 at 2008-12-28 19:39:48) [POST]
  Session ID: 
  Parameters: {"narrative"=>{"narrative_type_id"=>1, "title"=>"Test Narrative", "wedgetail"=>"1234", "uploaded_narrative"=>#<ActionController::TestUploadedFile:0x2aae79c43ba8 @original_filename="letter.txt", @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.26072.0>>}, "action"=>"create", "controller"=>"entry"}
  [4;35;1mPref Load (0.000193)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000657)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000106)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mNarrative Create (0.000287)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, 1, 'Test Narrative', '12346', 'f', '1234', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', NULL, '2008-12-28 19:39:48', NULL)[0m
DEBUG: getting user for "1234"
  [4;36;1mUser Load (0.000655)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1234') LIMIT 1[0m
  [4;35;1mInterest Load (0.000194)[0m   [0mSELECT * FROM interests WHERE (patient='1234') [0m
  [4;36;1mUser Load (0.000627)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
Redirected to http://test.host/record/show/1234
Completed in 0.01903 (52 reqs/sec) | DB: 0.00405 (21%) | 302 Found [http://test.host/entry/create?narrative%5Bnarrative_type_id%5D=1&narrative%5Btitle%5D=Test+Narrative&narrative%5Buploaded_narrative%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2aae79c43ba8%3E&narrative%5Bwedgetail%5D=1234]
  [4;35;1mSQL (0.000219)[0m   [0mSELECT count(*) AS count_all FROM narratives [0m
  [4;36;1mNarrative Load (0.000399)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000634)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#new (for 0.0.0.0 at 2008-12-28 19:39:48) [GET]
  Session ID: 
  Parameters: {"action"=>"new", "controller"=>"entry"}
  [4;36;1mPref Load (0.000131)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000619)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000102)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mNarrativeType Load (0.000278)[0m   [0;1mSELECT * FROM narrative_types ORDER BY narrative_type_name[0m
Rendering template within layouts/record
Rendering entry/new
Rendered entry/_form (0.00258)
  [4;35;1mSQL (0.001112)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000291)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000763)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.05072)
Completed in 0.06433 (15 reqs/sec) | Rendering: 0.05684 (88%) | DB: 0.00455 (7%) | 200 OK [http://test.host/entry/new]
  [4;35;1mNarrative Load (0.000427)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000668)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:39:48) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"text"=>"Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000136)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000682)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000103)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000913)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000781)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1235", narrative_type_id: nil, title: nil, content: "Dear Wedgetail\n\nThis is a test message to check web...", narrative_date: "2008-12-28", created_by: 1, created_at: nil, content_type: "text/plain", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000246)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, NULL, NULL, 1, 'f', '1235', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', '2008-12-28', '2008-12-28 19:39:48', NULL)[0m
DEBUG: getting user for "1235"
  [4;36;1mUser Load (0.000714)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') LIMIT 1[0m
  [4;35;1mInterest Load (0.000102)[0m   [0mSELECT * FROM interests WHERE (patient='1235') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000258)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000703)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00323)
Completed in 0.02025 (49 reqs/sec) | Rendering: 0.00624 (30%) | DB: 0.00573 (28%) | 200 OK [http://test.host/entry/upload?upload%5Btext%5D=Dear+Wedgetail%0A%0AThis+is+a+test+message+to+check+web+upload+and+forwarding%0Aof+messages.%0A%0ARe%3A+Bloggs%2C+Jack%2C+DOB+2%2F1%2F1960%0A%0AYours+sincerely%2C%0A%0AUnit+Test+Script%0A]
  [4;35;1mNarrative Load (0.000414)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000630)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:39:48) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2aae7a3c5a98 @original_filename="letter.txt", @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.26072.1>>}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000133)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000653)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000098)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
file = "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000782)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000716)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1235", narrative_type_id: nil, title: nil, content: "Dear Wedgetail\n\nThis is a test message to check web...", narrative_date: "2008-12-28", created_by: 1, created_at: nil, content_type: "text/plain", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000201)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, NULL, NULL, 1, 'f', '1235', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', '2008-12-28', '2008-12-28 19:39:48', NULL)[0m
DEBUG: getting user for "1235"
  [4;36;1mUser Load (0.000629)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') LIMIT 1[0m
  [4;35;1mInterest Load (0.000092)[0m   [0mSELECT * FROM interests WHERE (patient='1235') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000227)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000644)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00287)
Completed in 0.01378 (72 reqs/sec) | Rendering: 0.00387 (28%) | DB: 0.00522 (37%) | 200 OK [http://test.host/entry/upload?upload%5Bfile%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2aae7a3c5a98%3E]
  [4;35;1mNarrative Load (0.000440)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000638)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:39:48) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2aae7a29f8d0 @original_filename="potter.hl7", @content_type="text/plain", @tempfile=#<File:/tmp/potter.hl7.26072.0>>}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000130)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000619)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000096)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
file = "MSH|^~\\&|Wedgetail|Main Wedgetail Server^localhost^DNS|||20081216124907+1100||ORU^R01|55|D|2.3.1^AUS&&ISO^AS4700.2&&L\rPID|1||H00003hsgh^^^Wedgetail&wedgetail.medicine.net.au&DNS^WEDGIE^Main Wedgetail Server&localhost&DNS||POTTER^HARRY^||19940811|M|||8 Dursley Avenue^^Dudley^NSW^2001\rOBR|1||64^Main Wedgetail Server^localhost^DNS|11488-4^Consultation Note^LN||||||||||||||||||||||||||||2&LEMBKE&TONY\rOBX|1|FT|11488-4^Consultation Note^LN||||||||F\r"
message type is ORU
  [4;35;1mUser Load (0.001284)[0m   [0mSELECT * FROM users WHERE (users."wedgetail" = 'H00003hsgh') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "H00003hsgh", narrative_type_id: 7, title: nil, content: "MSH|^~\\&|Wedgetail|Main Wedgetail Server^localhost^...", narrative_date: "2008-12-28 19:39:48", created_by: 1, created_at: nil, content_type: "application/edi-hl7", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;36;1mNarrative Create (0.001127)[0m   [0;1mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('application/edi-hl7', NULL, 7, NULL, 1, 'f', 'H00003hsgh', NULL, 'MSH|^~\&|Wedgetail|Main Wedgetail Server^localhost^DNS|||20081216124907+1100||ORU^R01|55|D|2.3.1^AUS&&ISO^AS4700.2&&LPID|1||H00003hsgh^^^Wedgetail&wedgetail.medicine.net.au&DNS^WEDGIE^Main Wedgetail Server&localhost&DNS||POTTER^HARRY^||19940811|M|||8 Dursley Avenue^^Dudley^NSW^2001OBR|1||64^Main Wedgetail Server^localhost^DNS|11488-4^Consultation Note^LN||||||||||||||||||||||||||||2&LEMBKE&TONYOBX|1|FT|11488-4^Consultation Note^LN||||||||F', '2008-12-28 19:39:48', '2008-12-28 19:39:48', NULL)[0m
DEBUG: getting user for "H00003hsgh"
  [4;35;1mUser Load (0.000192)[0m   [0mSELECT * FROM users WHERE (users."wedgetail" = 'H00003hsgh') LIMIT 1[0m
  [4;36;1mNarrative Load (0.000474)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000655)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m
  [4;36;1mSQL (0.000194)[0m   [0;1mSELECT count(*) AS count_all FROM narratives [0m


Processing EntryController#create (for 0.0.0.0 at 2008-12-28 19:47:22) [POST]
  Session ID: 
  Parameters: {"narrative"=>{"narrative_type_id"=>1, "title"=>"Test Narrative", "wedgetail"=>"1234", "uploaded_narrative"=>#<ActionController::TestUploadedFile:0x2ad7980d9ba8 @original_filename="letter.txt", @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.26423.0>>}, "action"=>"create", "controller"=>"entry"}
  [4;35;1mPref Load (0.000180)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000668)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000104)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mNarrative Create (0.000364)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, 1, 'Test Narrative', '12346', 'f', '1234', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', NULL, '2008-12-28 19:47:22', NULL)[0m
DEBUG: getting user for "1234"
  [4;36;1mUser Load (0.000783)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1234') LIMIT 1[0m
  [4;35;1mInterest Load (0.000282)[0m   [0mSELECT * FROM interests WHERE (patient='1234') [0m
  [4;36;1mUser Load (0.000752)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
Redirected to http://test.host/record/show/1234
Completed in 0.02010 (49 reqs/sec) | DB: 0.00446 (22%) | 302 Found [http://test.host/entry/create?narrative%5Bnarrative_type_id%5D=1&narrative%5Btitle%5D=Test+Narrative&narrative%5Buploaded_narrative%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2ad7980d9ba8%3E&narrative%5Bwedgetail%5D=1234]
  [4;35;1mSQL (0.000280)[0m   [0mSELECT count(*) AS count_all FROM narratives [0m
  [4;36;1mNarrative Load (0.000750)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000627)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#new (for 0.0.0.0 at 2008-12-28 19:47:22) [GET]
  Session ID: 
  Parameters: {"action"=>"new", "controller"=>"entry"}
  [4;36;1mPref Load (0.000120)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000611)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000092)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mNarrativeType Load (0.000242)[0m   [0;1mSELECT * FROM narrative_types ORDER BY narrative_type_name[0m
Rendering template within layouts/record
Rendering entry/new
Rendered entry/_form (0.00206)
  [4;35;1mSQL (0.001102)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000296)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000747)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.05087)
Completed in 0.06260 (15 reqs/sec) | Rendering: 0.05548 (88%) | DB: 0.00487 (7%) | 200 OK [http://test.host/entry/new]
  [4;35;1mNarrative Load (0.000450)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000714)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:47:23) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"text"=>"Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000138)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000682)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000120)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000887)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000727)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1235", narrative_type_id: nil, title: nil, content: "Dear Wedgetail\n\nThis is a test message to check web...", narrative_date: "2008-12-28", created_by: 1, created_at: nil, content_type: "text/plain", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000215)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, NULL, NULL, 1, 'f', '1235', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', '2008-12-28', '2008-12-28 19:47:23', NULL)[0m
DEBUG: getting user for "1235"
  [4;36;1mUser Load (0.000641)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') LIMIT 1[0m
  [4;35;1mInterest Load (0.000093)[0m   [0mSELECT * FROM interests WHERE (patient='1235') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000249)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000665)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00303)
Completed in 0.01994 (50 reqs/sec) | Rendering: 0.00602 (30%) | DB: 0.00558 (27%) | 200 OK [http://test.host/entry/upload?upload%5Btext%5D=Dear+Wedgetail%0A%0AThis+is+a+test+message+to+check+web+upload+and+forwarding%0Aof+messages.%0A%0ARe%3A+Bloggs%2C+Jack%2C+DOB+2%2F1%2F1960%0A%0AYours+sincerely%2C%0A%0AUnit+Test+Script%0A]
  [4;35;1mNarrative Load (0.000402)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000640)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:47:23) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2ad79885b458 @original_filename="letter.txt", @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.26423.1>>}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000132)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000649)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000110)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
file = "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000849)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000710)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1235", narrative_type_id: nil, title: nil, content: "Dear Wedgetail\n\nThis is a test message to check web...", narrative_date: "2008-12-28", created_by: 1, created_at: nil, content_type: "text/plain", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000226)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, NULL, NULL, 1, 'f', '1235', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', '2008-12-28', '2008-12-28 19:47:23', NULL)[0m
DEBUG: getting user for "1235"
  [4;36;1mUser Load (0.000640)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') LIMIT 1[0m
  [4;35;1mInterest Load (0.000092)[0m   [0mSELECT * FROM interests WHERE (patient='1235') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000250)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000747)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00306)
Completed in 0.01481 (67 reqs/sec) | Rendering: 0.00408 (27%) | DB: 0.00545 (36%) | 200 OK [http://test.host/entry/upload?upload%5Bfile%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2ad79885b458%3E]
  [4;35;1mNarrative Load (0.000392)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000618)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:47:23) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2ad7987347a0 @original_filename="potter.hl7", @content_type="text/plain", @tempfile=#<File:/tmp/potter.hl7.26423.0>>}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000131)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000627)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000094)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
file = "MSH|^~\\&|Wedgetail|Main Wedgetail Server^localhost^DNS|||20081216124907+1100||ORU^R01|55|D|2.3.1^AUS&&ISO^AS4700.2&&L\rPID|1||H00003hsgh^^^Wedgetail&wedgetail.medicine.net.au&DNS^WEDGIE^Main Wedgetail Server&localhost&DNS||POTTER^HARRY^||19940811|M|||8 Dursley Avenue^^Dudley^NSW^2001\rOBR|1||64^Main Wedgetail Server^localhost^DNS|11488-4^Consultation Note^LN||||||||||||||||||||||||||||2&LEMBKE&TONY\rOBX|1|FT|11488-4^Consultation Note^LN||||||||F\r"
message type is ORU
  [4;35;1mUser Load (0.000236)[0m   [0mSELECT * FROM users WHERE (users."wedgetail" = 'H00003hsgh') LIMIT 1[0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000253)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000636)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00287)
Completed in 0.04695 (21 reqs/sec) | Rendering: 0.00389 (8%) | DB: 0.00299 (6%) | 200 OK [http://test.host/entry/upload?upload%5Bfile%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2ad7987347a0%3E]
  [4;36;1mNarrative Load (0.000465)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000645)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m
  [4;36;1mSQL (0.000186)[0m   [0;1mSELECT count(*) AS count_all FROM narratives [0m


Processing EntryController#create (for 0.0.0.0 at 2008-12-28 19:51:19) [POST]
  Session ID: 
  Parameters: {"narrative"=>{"narrative_type_id"=>1, "title"=>"Test Narrative", "wedgetail"=>"1234", "uploaded_narrative"=>#<ActionController::TestUploadedFile:0x2b0bd070ba78 @original_filename="letter.txt", @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.26604.0>>}, "action"=>"create", "controller"=>"entry"}
  [4;35;1mPref Load (0.000182)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000655)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000103)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mNarrative Create (0.000364)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, 1, 'Test Narrative', '12346', 'f', '1234', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', NULL, '2008-12-28 19:51:19', NULL)[0m
DEBUG: getting user for "1234"
  [4;36;1mUser Load (0.000781)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1234') LIMIT 1[0m
  [4;35;1mInterest Load (0.000273)[0m   [0mSELECT * FROM interests WHERE (patient='1234') [0m
  [4;36;1mUser Load (0.000717)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '12346') LIMIT 1[0m
Redirected to http://test.host/record/show/1234
Completed in 0.02018 (49 reqs/sec) | DB: 0.00437 (21%) | 302 Found [http://test.host/entry/create?narrative%5Bnarrative_type_id%5D=1&narrative%5Btitle%5D=Test+Narrative&narrative%5Buploaded_narrative%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2b0bd070ba78%3E&narrative%5Bwedgetail%5D=1234]
  [4;35;1mSQL (0.000268)[0m   [0mSELECT count(*) AS count_all FROM narratives [0m
  [4;36;1mNarrative Load (0.000424)[0m   [0;1mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;35;1mUser Load (0.000609)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#new (for 0.0.0.0 at 2008-12-28 19:51:19) [GET]
  Session ID: 
  Parameters: {"action"=>"new", "controller"=>"entry"}
  [4;36;1mPref Load (0.000123)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;35;1mUser Load (0.000692)[0m   [0mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;36;1mPref Load (0.000095)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;35;1mCACHE (0.000000)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mNarrativeType Load (0.000233)[0m   [0;1mSELECT * FROM narrative_types ORDER BY narrative_type_name[0m
Rendering template within layouts/record
Rendering entry/new
Rendered entry/_form (0.00206)
  [4;35;1mSQL (0.040945)[0m   [0m SELECT name
 FROM sqlite_master
 WHERE type = 'table' AND NOT name = 'sqlite_sequence'
[0m
  [4;36;1mMessage Load (0.000298)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000713)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.05059)
Completed in 0.06255 (15 reqs/sec) | Rendering: 0.01554 (24%) | DB: 0.04440 (70%) | 200 OK [http://test.host/entry/new]
  [4;35;1mNarrative Load (0.000435)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000651)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:51:19) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"text"=>"Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000132)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000655)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000098)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000927)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000751)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1235", narrative_type_id: nil, title: nil, content: "Dear Wedgetail\n\nThis is a test message to check web...", narrative_date: "2008-12-28", created_by: 1, created_at: nil, content_type: "text/plain", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000220)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, NULL, NULL, 1, 'f', '1235', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', '2008-12-28', '2008-12-28 19:51:19', NULL)[0m
DEBUG: getting user for "1235"
  [4;36;1mUser Load (0.000651)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') LIMIT 1[0m
  [4;35;1mInterest Load (0.000091)[0m   [0mSELECT * FROM interests WHERE (patient='1235') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000254)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000677)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00313)
Completed in 0.02002 (49 reqs/sec) | Rendering: 0.00619 (30%) | DB: 0.00554 (27%) | 200 OK [http://test.host/entry/upload?upload%5Btext%5D=Dear+Wedgetail%0A%0AThis+is+a+test+message+to+check+web+upload+and+forwarding%0Aof+messages.%0A%0ARe%3A+Bloggs%2C+Jack%2C+DOB+2%2F1%2F1960%0A%0AYours+sincerely%2C%0A%0AUnit+Test+Script%0A]
  [4;35;1mNarrative Load (0.000442)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000626)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:51:19) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2b0bd0e84c78 @original_filename="letter.txt", @content_type="text/plain", @tempfile=#<File:/tmp/letter.txt.26604.1>>}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000136)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000638)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000097)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
file = "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
TEXT FILE: "Dear Wedgetail\n\nThis is a test message to check web upload and forwarding\nof messages.\n\nRe: Bloggs, Jack, DOB 2/1/1960\n\nYours sincerely,\n\nUnit Test Script\n"
  [4;35;1mUser Load (0.000770)[0m   [0mSELECT * FROM users WHERE (dob = '1960-1-2' and family_name like 'Bloggs%' and given_names like 'Jack%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000695)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1235", narrative_type_id: nil, title: nil, content: "Dear Wedgetail\n\nThis is a test message to check web...", narrative_date: "2008-12-28", created_by: 1, created_at: nil, content_type: "text/plain", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000227)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('text/plain', NULL, NULL, NULL, 1, 'f', '1235', NULL, 'Dear Wedgetail

This is a test message to check web upload and forwarding
of messages.

Re: Bloggs, Jack, DOB 2/1/1960

Yours sincerely,

Unit Test Script
', '2008-12-28', '2008-12-28 19:51:19', NULL)[0m
DEBUG: getting user for "1235"
  [4;36;1mUser Load (0.000640)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1235') LIMIT 1[0m
  [4;35;1mInterest Load (0.000092)[0m   [0mSELECT * FROM interests WHERE (patient='1235') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000231)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000645)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00291)
Completed in 0.01398 (71 reqs/sec) | Rendering: 0.00404 (28%) | DB: 0.00524 (37%) | 200 OK [http://test.host/entry/upload?upload%5Bfile%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2b0bd0e84c78%3E]
  [4;35;1mNarrative Load (0.000442)[0m   [0mSELECT * FROM narratives WHERE (narratives."id" = 1) [0m
  [4;36;1mUser Load (0.000710)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) [0m


Processing EntryController#upload (for 0.0.0.0 at 2008-12-28 19:51:19) [POST]
  Session ID: 
  Parameters: {"action"=>"upload", "upload"=>{"file"=>#<ActionController::TestUploadedFile:0x2b0bd0d615d0 @original_filename="potter.hl7", @content_type="text/plain", @tempfile=#<File:/tmp/potter.hl7.26604.0>>}, "controller"=>"entry"}
  [4;35;1mPref Load (0.000150)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'use_ssl') LIMIT 1[0m
  [4;36;1mUser Load (0.000629)[0m   [0;1mSELECT * FROM users WHERE (users."id" = 1) LIMIT 1[0m
  [4;35;1mPref Load (0.000095)[0m   [0mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM prefs WHERE (prefs."name" = 'time_out') LIMIT 1[0m
file = "MSH|^~\\&|Wedgetail|Main Wedgetail Server^localhost^DNS|||20081216124907+1100||ORU^R01|55|D|2.3.1^AUS&&ISO^AS4700.2&&L\rPID|1||H00003hsgh^^^Wedgetail&wedgetail.medicine.net.au&DNS^WEXIE^Main Wedgetail Server&localhost&DNS||POTTER^HARRY^||19940811|M|||8 Dursley Avenue^^Dudley^NSW^2001\rOBR|1||64^Main Wedgetail Server^localhost^DNS|11488-4^Consultation Note^LN||||||||||||||||||||||||||||2&LEMBKE&TONY\rOBX|1|FT|11488-4^Consultation Note^LN||||||||F\r"
message type is ORU
  [4;35;1mUser Load (0.000851)[0m   [0mSELECT * FROM users WHERE (dob = '1994-8-11' and family_name like 'POTTER%' and given_names like 'HARRY%') ORDER BY created_at DESC[0m
  [4;36;1mUser Load (0.000711)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1236') ORDER BY created_at DESC LIMIT 1[0m
created new narrative #<Narrative id: nil, wedgetail: "1236", narrative_type_id: 7, title: nil, content: "MSH|^~\\&|Wedgetail|Main Wedgetail Server^localhost^...", narrative_date: "2008-12-28 19:51:19", created_by: 1, created_at: nil, content_type: "application/edi-hl7", plaintext: nil, awaiting_pickup: false, hl7_id: nil, hl7_reply_id: nil>
  [4;35;1mNarrative Create (0.000211)[0m   [0mINSERT INTO narratives ("content_type", "hl7_id", "narrative_type_id", "title", "created_by", "awaiting_pickup", "wedgetail", "plaintext", "content", "narrative_date", "created_at", "hl7_reply_id") VALUES('application/edi-hl7', NULL, 7, NULL, 1, 'f', '1236', NULL, 'MSH|^~\&|Wedgetail|Main Wedgetail Server^localhost^DNS|||20081216124907+1100||ORU^R01|55|D|2.3.1^AUS&&ISO^AS4700.2&&LPID|1||H00003hsgh^^^Wedgetail&wedgetail.medicine.net.au&DNS^WEXIE^Main Wedgetail Server&localhost&DNS||POTTER^HARRY^||19940811|M|||8 Dursley Avenue^^Dudley^NSW^2001OBR|1||64^Main Wedgetail Server^localhost^DNS|11488-4^Consultation Note^LN||||||||||||||||||||||||||||2&LEMBKE&TONYOBX|1|FT|11488-4^Consultation Note^LN||||||||F', '2008-12-28 19:51:19', '2008-12-28 19:51:19', NULL)[0m
DEBUG: getting user for "1236"
  [4;36;1mUser Load (0.000614)[0m   [0;1mSELECT * FROM users WHERE (users."wedgetail" = '1236') LIMIT 1[0m
  [4;35;1mInterest Load (0.000090)[0m   [0mSELECT * FROM interests WHERE (patient='1236') [0m
Rendering template within layouts/record
Rendering entry/upload
  [4;36;1mMessage Load (0.000223)[0m   [0;1mSELECT * FROM messages WHERE (recipient_id='12346' and status=0) ORDER BY created_at DESC[0m
  [4;35;1mUser Load (0.000637)[0m   [0mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
  [4;36;1mCACHE (0.000000)[0m   [0;1mSELECT * FROM users WHERE (role=5 and hatched=0) [0m
Rendered layouts/_side_links (0.00287)
Completed in 0.04899 (20 reqs/sec) | Rendering: 0.00389 (7%) | DB: 0.00536 (10%) | 200 OK [http://test.host/entry/upload?upload%5Bfile%5D=%23%3CActionController%3A%3ATestUploadedFile%3A0x2b0bd0d615d0%3E]
